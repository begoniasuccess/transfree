(function(t){function e(e){for(var i,o,c=e[0],l=e[1],r=e[2],p=0,d=[];p<c.length;p++)o=c[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(d.length)d.shift()();return n.push.apply(n,r||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,c=1;c<s.length;c++){var l=s[c];0!==a[l]&&(i=!1)}i&&(n.splice(e--,1),t=o(o.s=s[0]))}return t}var i={},a={app:0},n=[];function o(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/transfree/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var r=0;r<c.length;r++)e(c[r]);var u=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";s("85ec")},"0e18":function(t){t.exports=JSON.parse('{"searchBus":"公車搜尋","nearbyStop":"附近站牌","commonlyUsed":"常用公車","settings":"設定","switchToFriendlyArea":"友善專區","switchToNormalArea":"一般專區","personalSettings":"個人設定","updateSettings":"更新設定","versionSettings":"版本設定","resetCommonBus":"重設常用公車","contactUs":"聯絡我們","versionInfo":"版本資訊","programVersion":"程式版本","routeVersion":"路線版本","autoUpdateRoute":"路線資料自動更新","selectFontSize":"請選擇字體大小","selectMultilingual":"請選擇語言","selectUpdateFrequency":"請選擇到站時間更新頻率","arrivalTimeUpdateFrequency":"到站時間更新頻率","seconds":"秒","tw":"中文","en":"英文","fontSmall":"字體 較小","fontNormal":"字體 正常","fontBig":"字體 較大","fontBigger":"字體 更大","selectCity":"請選擇縣市","enterRouteName":"請輸入路線","distanceFromCenter":"距離範圍","distanceUnit":"單位：公尺","currentCity":"當前縣市","enterLocation":"你要去哪裡?","searchTimestamp":"搜尋時間","searchList":"搜尋清單","go":"去","back":"返","minutes":"分","pitting":"進站中","hasNotDeparted":"尚未發車","trafficControlDoNotStop":"交管不停靠","lastBusHasPassed":"末班車已過","notOperatingToday":"今日未營運","updateTimestamp":"更新時間","busInfo":"公車相關資訊","fare":"票價","chargingMethod":"收費方式","segmentedBuffer":"分段緩衝","weekdayDeparture":"平日發車","firstBus":"首班車","lastBus":"末班車","remark":"備註","holidayDeparture":"假日發車","dynamicKeyboard":"動態鍵盤","red":"紅","blue":"藍","green":"綠","brown":"棕","orange":"橘","small":"小","trunk":"幹線","lead":"先導","reset":"重設","backspace":"返回","citizen":"市民","jumpingFrog":"跳蛙","neihuSciencePark":"內科","nangangSoftwarePark":"南軟","night":"夜間","maokong":"貓空","wyan":"懷恩","Taipei":"臺北市","NewTaipei":"新北市","Taoyuan":"桃園市","Taichung":"臺中市","Tainan":"臺南市","Kaohsiung":"高雄市","Keelung":"基隆市","Hsinchu":"新竹市","HsinchuCounty":"新竹縣","MiaoliCounty":"苗栗縣","ChanghuaCounty":"彰化縣","NantouCounty":"南投縣","YunlinCounty":"雲林縣","ChiayiCounty":"嘉義縣","Chiayi":"嘉義市","PingtungCounty":"屏東縣","YilanCounty":"宜蘭縣","HualienCounty":"花蓮縣","TaitungCounty":"臺東縣","KinmenCounty":"金門縣","PenghuCounty":"澎湖縣","LienchiangCounty":"連江縣","remindYou":"提醒您","doYouWantToSwitchToNormalArea":"請問您要切換為一般專區嗎？","doYouWantToSwitchToFriendlyArea":"請問您要切換為友善專區嗎？","doYouConfirmToResetCommonBusList":"請問您確定要重設常用公車嗎？","confirm":"確定","cancel":"取消"}')},1030:function(t,e,s){},"30a2":function(t,e,s){"use strict";s("cc29")},"44ae":function(t,e,s){"use strict";s("ebae")},"450c":function(t,e,s){"use strict";s("1030")},4678:function(t,e,s){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf755","./tlh.js":"cf755","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=n(t);return s(e)}function n(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}a.keys=function(){return Object.keys(i)},a.resolve=n,t.exports=a,a.id="4678"},"56d7":function(t,e,s){"use strict";s.r(e),s.d(e,"app",(function(){return He}));s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:{a11y:t.isA11y,en:t.isEn},style:{fontSize:t.globalFontSize+"em"},attrs:{id:"app"}},[t.isPopupShow?s("div",{staticClass:"content_popup"},[s("div",{staticClass:"flex_row_cb"},[s("p",{staticClass:"title_card_txt"},[t._v(t._s(t.$t("remindYou")))]),s("i",{staticClass:"i_close",on:{click:function(e){t.isPopupShow=!1}}})]),s("div",{staticClass:"flex_row_cc"},[t.isA11y?s("p",[t._v(t._s(t.$t("doYouWantToSwitchToNormalArea")))]):t._e(),t.isA11y?t._e():s("p",[t._v(t._s(t.$t("doYouWantToSwitchToFriendlyArea")))])]),s("div",{staticClass:"flex_row_cc"},[s("button",{staticClass:"bus_status2",attrs:{type:"button"},on:{click:function(e){t.isPopupShow=!1}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),s("button",{staticClass:"bus_status1",attrs:{type:"button"},on:{click:function(e){t.isA11y=!t.isA11y,t.isPopupShow=!1}}},[t._v(" "+t._s(t.$t("confirm"))+" ")])])]):t._e(),s("div",{staticClass:"black_overlay"}),s("div",{staticClass:"content"},[s("div",{staticClass:"menu",style:[t.isMobileOpenMenu?"":{transform:"translate( -100%,0)"}]},[s("div",{staticClass:"img_logo"}),s("div",{staticClass:"flex_col_cc h_100"},[s("router-link",{staticClass:"menu_btn",attrs:{to:"/search-bus","active-class":"active"},nativeOn:{click:function(e){t.width<768&&(t.isMobileOpenMenu=!1)}}},[s("i",{staticClass:"menu_i_search"}),s("div",{staticClass:"menu_btn_txt"},[t._v(" "+t._s(t.$t("searchBus"))+" ")])]),s("router-link",{staticClass:"menu_btn",attrs:{to:"/nearby-stop","active-class":"active"},nativeOn:{click:function(e){t.width<768&&(t.isMobileOpenMenu=!1)}}},[s("i",{staticClass:"menu_i_stop"}),s("div",{staticClass:"menu_btn_txt"},[t._v(" "+t._s(t.$t("nearbyStop"))+" ")])]),s("router-link",{staticClass:"menu_btn",attrs:{to:"/commonly-used-bus","active-class":"active"},nativeOn:{click:function(e){t.width<768&&(t.isMobileOpenMenu=!1)}}},[s("i",{staticClass:"menu_i_favoraite"}),s("div",{staticClass:"menu_btn_txt"},[t._v(" "+t._s(t.$t("commonlyUsed"))+" ")])]),s("router-link",{staticClass:"menu_btn",attrs:{to:"/settings","active-class":"active"},nativeOn:{click:function(e){t.width<768&&(t.isMobileOpenMenu=!1)}}},[s("i",{staticClass:"menu_i_set"}),s("div",{staticClass:"menu_btn_txt"},[t._v(" "+t._s(t.$t("settings"))+" ")])])],1)]),s("div",{staticClass:"search"},[s("div",{staticClass:"btn_a11y"},[t.isA11y?t._e():s("div",{on:{click:function(e){t.isPopupShow=!0}}},[t._v(" "+t._s(t.$t("switchToFriendlyArea"))+" ")]),t.isA11y?s("div",{on:{click:function(e){t.isPopupShow=!0}}},[t._v(" "+t._s(t.$t("switchToNormalArea"))+" ")]):t._e(),s("i",{staticClass:"i_a11y",on:{click:function(e){t.isPopupShow=!0}}})]),s("div",{staticClass:"header_mobile flex_row_cb"},[s("i",{staticClass:"i_menu",on:{click:t.mobileSwitchMenu}}),s("i",{staticClass:"img_logo_mobile"}),s("div",{staticClass:"btn_a11y"},[t.isA11y?t._e():s("div",{on:{click:function(e){t.isA11y=!t.isA11y}}},[t._v(" "+t._s(t.$t("switchToFriendlyArea"))+" ")]),t.isA11y?s("div",{on:{click:function(e){t.isA11y=!t.isA11y}}},[t._v(" "+t._s(t.$t("switchToNormalArea"))+" ")]):t._e(),s("i",{staticClass:"i_a11y",on:{click:function(e){t.isA11y=!t.isA11y}}})])]),s("div",{staticClass:"black_overlay"}),s("div",{staticClass:"content_function select_scrollbar"},[s("router-view")],1)])])])},n=[],o="V1.1.1",c="V2",l="JSON",r=.875,u=1,p=1.125,d=1.25,h="tw",f="en",m=10,_=15,v=20,b=25,g=30,y={list:"search-list",estimated:"EstimatedTimeOfArrival",map:"SearchMap"},C={name:"App",components:{},data:function(){return{globalFontSize:this.$store.getters.getFontSize,isA11y:!1,isEn:!1,isMobileOpenMenu:!0,isPopupShow:!1,width:window.innerWidth}},watch:{"$store.state.fontSize":function(){this.globalFontSize=this.$store.getters.getFontSize},"$i18n.locale":function(){this.$i18n.locale===f?this.isEn=!0:this.isEn=!1}},methods:{mobileSwitchMenu:function(){this.isMobileOpenMenu=!this.isMobileOpenMenu}}},S=C,w=(s("034f"),s("2877")),k=Object(w["a"])(S,a,n,!1,null,null,null),B=k.exports,x=s("8c4f"),$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h_100 w_100"},[s("div",{staticClass:"flex_row_sb w_100 h_100"},[s("div",{staticClass:"flex_col w_100 h_100 auto"},[s("Search",{attrs:{inputValue:t.inputValue,page:t.page,inputHint:t.inputHint},on:{getSearchCity:t.getSearchCity,getInputValue:t.getInputValue}}),1==t.isDynamicKeyboardShow||1==t.isBusInfoShow?s("div",{staticClass:"block_sec flex_col select_scrollbar",style:[t.isMobileOpenBusInfo?{display:"block"}:{display:"none"}]},[t.isDynamicKeyboardShow?s("span",[s("DynamicKeyboard",{on:{clickKeyboard:t.clickKeyboard,mobileSwitchBusInfo:t.mobileSwitchBusInfo}})],1):t._e(),t.isBusInfoShow?s("span",[s("BusInfo",{attrs:{city:t.$route.params.city,routeName:t.$route.params.routeName},on:{mobileSwitchBusInfo:t.mobileSwitchBusInfo}})],1):t._e()]):s("div",{staticClass:"block_sec img_first flex_col"},[s("div",{staticClass:"img_01"})])],1),s("div",{staticClass:"block_list"},[s("router-view",{attrs:{selectedCity:t.selected,search:t.inputValue},on:{mobileSwitchBusInfo:t.mobileSwitchBusInfo,showBusInfo:function(e){t.isBusInfoShow=!0,t.isDynamicKeyboardShow=!1}}})],1)])])},L=[],I=(s("ac1f"),s("5319"),[{value:"Taipei",text:"臺北市",id:"TPE"},{value:"NewTaipei",text:"新北市",id:"NWT"},{value:"Taoyuan",text:"桃園市",id:"TAO"},{value:"Taichung",text:"臺中市",id:"TXG"},{value:"Tainan",text:"臺南市",id:"TNN"},{value:"Kaohsiung",text:"高雄市",id:"KHH"},{value:"Keelung",text:"基隆市",id:"KEE"},{value:"Hsinchu",text:"新竹市",id:"HSZ"},{value:"HsinchuCounty",text:"新竹縣",id:"HSQ"},{value:"MiaoliCounty",text:"苗栗縣",id:"MIA"},{value:"ChanghuaCounty",text:"彰化縣",id:"CHA"},{value:"NantouCounty",text:"南投縣",id:"NAN"},{value:"YunlinCounty",text:"雲林縣",id:"YUN"},{value:"ChiayiCounty",text:"嘉義縣",id:"CYQ"},{value:"Chiayi",text:"嘉義市",id:"CYI"},{value:"PingtungCounty",text:"屏東縣",id:"PIF"},{value:"YilanCounty",text:"宜蘭縣",id:"ILA"},{value:"HualienCounty",text:"花蓮縣",id:"HUA"},{value:"TaitungCounty",text:"臺東縣",id:"TTT"},{value:"KinmenCounty",text:"金門縣",id:"KIN"},{value:"PenghuCounty",text:"澎湖縣",id:"PEN"},{value:"LienchiangCounty",text:"連江縣",id:"LIE"}]),T=s("d4ec"),j=s("ade3"),N=function t(e,s,i,a,n){Object(T["a"])(this,t),Object(j["a"])(this,"routeUID",""),Object(j["a"])(this,"zh_tw",""),Object(j["a"])(this,"en",""),Object(j["a"])(this,"departureStopNameZh",""),Object(j["a"])(this,"destinationStopNameZh",""),Object(j["a"])(this,"isLove",!1),this.routeUID=e,this.zh_tw=s,this.en=i,this.departureStopNameZh=a,this.destinationStopNameZh=n},O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"block_primary flex_col"},[s("p",{staticClass:"title_txt"},[t._v(t._s(t.$t(t.page)))]),s("div",{staticClass:"custom-select",on:{blur:function(e){t.open=!1}}},[s("div",{staticClass:"selected",class:{open:t.open},on:{click:function(e){t.open=!t.open}}},[t._v(" "+t._s(t.$t(t.selected.value))+" ")]),s("div",{staticClass:"items flex_col",class:{selectHide:!t.open}},[s("p",{staticClass:"option_title"},[t._v(t._s(t.$t("selectCity")))]),s("div",{staticClass:"select_scrollbar"},t._l(t.cities,(function(e,i){return s("div",{key:i,staticClass:"select_option",on:{click:function(s){t.selected=e,t.open=!1}}},[t._v(" "+t._s(t.$t(e.value))+" ")])})),0)])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"inner_group text_overflow",attrs:{type:"text",placeholder:t.$t(t.inputHint)},domProps:{value:t.inputValue},on:{focus:function(e){return t.focusInputValue()},input:function(e){e.target.composing||(t.inputValue=e.target.value)}}}),""!=t.searchTimestamp?s("p",{staticClass:"text_info"},[t._v(" "+t._s(t.$t("searchTimestamp"))+" "+t._s(t.searchTimestamp)+" ")]):t._e()])},F=[],A=(s("99af"),s("c1df")),M=s.n(A),z=function(){return M()().format("YYYY/MM/DD HH:mm:ss")},U=function(t){return"".concat(t.substr(0,2),":").concat(t.substr(2,4))},V={name:"Search",props:{selectedCity:String,inputValue:String,page:String,inputHint:String},data:function(){return{cities:I,selected:I[0],open:!1,searchTimestamp:""}},mounted:function(){},methods:{focusInputValue:function(){this.$emit("getInputValue",this.inputValue)},updateSearchTimestamp:function(){this.searchTimestamp=z()}},watch:{inputValue:function(){this.$emit("getInputValue",this.inputValue),this.updateSearchTimestamp()},selected:function(){this.$emit("getSearchCity",this.selected),this.$emit("getInputValue",this.inputValue),""!==this.inputValue&&this.updateSearchTimestamp()}}},D=V,P=(s("30a2"),Object(w["a"])(D,O,F,!1,null,"5df5de0f",null)),K=P.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"flex_row_cb"},[s("p",{staticClass:"title_txt"},[t._v(t._s(t.$t("busInfo")))]),s("i",{staticClass:"i_close",on:{click:t.mobileSwitchBusInfo}})]),s("div",{staticClass:"content_card"},[s("p",{staticClass:"title_card_txt"},[t._v(t._s(t.$t("fare")))]),s("label",{staticClass:"flex_row_cb"},[s("p",[t._v(t._s(t.operatorName))]),s("p",[t._v(t._s(t.operatorPhoneNumber))])]),s("label",{staticClass:"flex_row_cb"},[s("p",[t._v(t._s(t.$t("chargingMethod")))]),s("p",[t._v(t._s(t.ticketPriceDescription))])]),s("label",{staticClass:"flex_row_cb"},[s("p",[t._v(t._s(t.$t("segmentedBuffer")))]),s("p",[t._v(t._s(t.fareBufferZoneDescription))])])]),s("div",{staticClass:"content_card"},[s("p",{staticClass:"title_card_txt"},[t._v(t._s(t.$t("weekdayDeparture")))]),s("div",{staticClass:"flex_row_sb"},[s("div",{staticClass:"w_100"},[s("label",{staticClass:"flex_row_cb"},[s("p",[t._v(t._s(t.$t("firstBus")))]),s("p",[t._v(t._s(t.firstBusTime))])])]),s("div",{staticClass:"w_100"},[s("label",{staticClass:"flex_row_cb"},[s("p",[t._v(t._s(t.$t("lastBus")))]),s("p",[t._v(t._s(t.lastBusTime))])])])]),s("label",{staticClass:"w_100"},[s("p",[t._v(t._s(t.$t("remark")))])])]),s("div",{staticClass:"content_card"},[s("p",{staticClass:"title_card_txt"},[t._v(t._s(t.$t("holidayDeparture")))]),s("div",{staticClass:"flex_row_sb"},[s("div",{staticClass:"flex_col w_100"},[s("label",{staticClass:"flex_row_cb"},[s("p",[t._v(t._s(t.$t("lastBus")))]),s("p",[t._v(t._s(t.holidayFirstBusTime))])])]),s("div",{staticClass:"flex_col w_100"},[s("label",{staticClass:"flex_row_cb"},[s("p",[t._v(t._s(t.$t("lastBus")))]),s("p",[t._v(t._s(t.holidayLastBusTime))])])])]),s("label",{staticClass:"w_100"},[s("p",[t._v(t._s(t.$t("remark")))])])])])},q=[],H=(s("4de4"),s("d3b7"),s("25f0"),s("bc3a")),R=s.n(H),Y=s("6c2d"),Z="https://ptx.transportdata.tw/MOTC/v2/Bus",G=function(t,e){return"get"===t.toString().toLowerCase()?new Promise((function(t,s){R.a.get(e,{headers:W()}).then(t).catch(s)})):"post"===t.toString().toLowerCase()?new Promise((function(t,s){R.a.post(e,{headers:W()}).then(t).catch(s)})):void 0},W=function(){var t="e212b195247045edafa3708823b7cc5e",e="vOA-PgpYHlRJciuElXMSJ9sc1Mc",s=(new Date).toGMTString(),i=new Y["a"]("SHA-1","TEXT");i.setHMACKey(e,"TEXT"),i.update("x-date: "+s);var a=i.getHMAC("B64"),n='hmac username="'+t+'", algorithm="hmac-sha1", headers="x-date", signature="'+a+'"';return{Authorization:n,"X-Date":s}},J={name:"BusInfo",props:{city:String,routeName:String},data:function(){return{operatorName:"",operatorPhoneNumber:"",ticketPriceDescription:"",fareBufferZoneDescription:"",firstBusTime:"",lastBusTime:"",holidayFirstBusTime:"",holidayLastBusTime:""}},mounted:function(){var t=this;G("get","".concat(Z,"/Route/City/").concat(this.city,"/").concat(this.routeName,"?$format=").concat(l)).then((function(e){var s=e.data;t.operatorName=s[0].Operators[0].OperatorName.Zh_tw,t.ticketPriceDescription=s[0].TicketPriceDescriptionZh,t.fareBufferZoneDescription=s[0].FareBufferZoneDescriptionZh,t.firstBusTime=U(s[0].SubRoutes[0].FirstBusTime),t.lastBusTime=U(s[0].SubRoutes[0].LastBusTime),t.holidayFirstBusTime=U(s[0].SubRoutes[0].HolidayFirstBusTime),t.holidayLastBusTime=U(s[0].SubRoutes[0].HolidayLastBusTime),G("get","".concat(Z,"/Operator/City/").concat(t.city,"?format=").concat(l)).then((function(e){t.operatorPhoneNumber=e.data.filter((function(t){return t.OperatorNo===s[0].Operators[0].OperatorNo}))[0].OperatorPhone}))})).catch((function(t){console.log(t)}))},methods:{mobileSwitchBusInfo:function(){this.$emit("mobileSwitchBusInfo")}}},X=J,Q=Object(w["a"])(X,E,q,!1,null,"75f61fb1",null),tt=Q.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"flex_row_cb"},[s("p",{staticClass:"title_txt"},[t._v(t._s(t.$t("dynamicKeyboard")))]),s("i",{staticClass:"i_close",on:{click:t.mobileSwitchBusInfo}})]),s("div",{staticClass:"flex_row_cc"},[s("button",{staticClass:"label_red",attrs:{"data-value":"紅"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("red"))+" ")]),s("button",{staticClass:"label_blue",attrs:{"data-value":"藍"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("blue"))+" ")]),s("button",{attrs:{"data-value":"1"},on:{click:t.clickKeyboard}},[t._v("1")]),s("button",{attrs:{"data-value":"2"},on:{click:t.clickKeyboard}},[t._v("2")]),s("button",{attrs:{"data-value":"3"},on:{click:t.clickKeyboard}},[t._v("3")])]),s("div",{staticClass:"flex_row_cc"},[s("button",{staticClass:"label_primary",attrs:{"data-value":"綠"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("green"))+" ")]),s("button",{staticClass:"label_brown",attrs:{"data-value":"棕"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("brown"))+" ")]),s("button",{attrs:{"data-value":"4"},on:{click:t.clickKeyboard}},[t._v("4")]),s("button",{attrs:{"data-value":"5"},on:{click:t.clickKeyboard}},[t._v("5")]),s("button",{attrs:{"data-value":"6"},on:{click:t.clickKeyboard}},[t._v("6")])]),s("div",{staticClass:"flex_row_cc"},[s("button",{staticClass:"label_sec",attrs:{"data-value":"橘"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("orange"))+" ")]),s("button",{staticClass:"label_purple",attrs:{"data-value":"小"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("small"))+" ")]),s("button",{attrs:{"data-value":"7"},on:{click:t.clickKeyboard}},[t._v("7")]),s("button",{attrs:{"data-value":"8"},on:{click:t.clickKeyboard}},[t._v("8")]),s("button",{attrs:{"data-value":"9"},on:{click:t.clickKeyboard}},[t._v("9")])]),s("div",{staticClass:"flex_row_cc"},[s("button",{attrs:{"data-value":"幹線"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("trunk"))+" ")]),s("button",{attrs:{"data-value":"先導"},on:{click:t.clickKeyboard}},[t._v(t._s(t.$t("lead")))]),s("button",{staticClass:"label_primamry2",attrs:{"data-value":"reset"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("reset"))+" ")]),s("button",{attrs:{"data-value":"0"},on:{click:t.clickKeyboard}},[t._v("0")]),s("button",{staticClass:"label_primamry2",attrs:{"data-value":"back"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("backspace"))+" ")])]),s("div",{staticClass:"flex_row_cc"},[s("button",{attrs:{"data-value":"市民"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("citizen"))+" ")]),s("button",{attrs:{"data-value":"跳蛙"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("jumpingFrog"))+" ")]),s("button",{attrs:{"data-value":"內科"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("neihuSciencePark"))+" ")]),s("button",{attrs:{"data-value":"南軟"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("nangangSoftwarePark"))+" ")]),s("button",{attrs:{"data-value":"夜間"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("night"))+" ")])]),s("div",{staticClass:"flex_row_cc"},[s("button",{attrs:{"data-value":"貓空"},on:{click:t.clickKeyboard}},[t._v(" "+t._s(t.$t("maokong"))+" ")]),s("button",{attrs:{"data-value":"懷恩"},on:{click:t.clickKeyboard}},[t._v(t._s(t.$t("wyan")))]),s("button",{attrs:{"data-value":"F"},on:{click:t.clickKeyboard}},[t._v("F")]),s("button",{attrs:{"data-value":"R"},on:{click:t.clickKeyboard}},[t._v("R")]),s("button",{attrs:{"data-value":"T"},on:{click:t.clickKeyboard}},[t._v("T")])])])},st=[],it={name:"DynamicKeyboard",data:function(){return{}},methods:{clickKeyboard:function(t){this.$emit("clickKeyboard",t.currentTarget.getAttribute("data-value"))},mobileSwitchBusInfo:function(){this.$emit("mobileSwitchBusInfo")}}},at=it,nt=(s("5f0d"),Object(w["a"])(at,et,st,!1,null,"56a8d15d",null)),ot=nt.exports,ct={name:"SearchBus",components:{DynamicKeyboard:ot,BusInfo:tt,Search:K},data:function(){return{page:"searchBus",inputHint:"enterRouteName",cities:I,selected:I[0],open:!1,isDynamicKeyboardShow:!1,isBusInfoShow:!1,searchBusList:new Array,routeName:"",bus:N,inputValue:"",busNum:"",isMobileOpenBusInfo:!0}},methods:{clickKeyboard:function(t){"reset"===t?this.inputValue="":"back"===t?(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.getInputValue(this.inputValue)):(this.inputValue=this.inputValue+t,this.getInputValue(this.inputValue))},getBusNum:function(t){this.isDynamicKeyboardShow=!1,this.busNum=t},getSearchCity:function(t){this.selected=t},getInputValue:function(t){this.isDynamicKeyboardShow=!0,this.isMobileOpenBusInfo=!0,this.isBusInfoShow=!1,this.inputValue=t},mobileSwitchBusInfo:function(){this.isMobileOpenBusInfo=!this.isMobileOpenBusInfo},loadSearchList:function(){this.$router.replace("/search-bus/search-list").catch((function(){}))}},watch:{busNum:function(){console.log("watch father busNum:"+this.busNum)},selected:function(){this.isDynamicKeyboardShow=!0,""!==this.selected.value&&""!==this.inputValue&&this.loadSearchList()},inputValue:function(){this.isDynamicKeyboardShow=!0,""!==this.selected.value&&""!==this.inputValue&&this.loadSearchList()}}},lt=ct,rt=(s("7030"),Object(w["a"])(lt,$,L,!1,null,"1c01f4ed",null)),ut=rt.exports,pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h_100 w_100"},[s("div",{staticClass:"flex_row_cb w_100 h_100"},[s("div",{staticClass:"flex_col w_100 h_100"},[s("div",{staticClass:"content_list"},[s("div",{staticClass:"list_top flex_row_cc"},[t._v(t._s(t.$t("searchList")))]),s("div",{staticClass:"list_bottom h_100 flex_col"},[s("div",{staticClass:"select_scrollbar"},t._l(t.searchBusList,(function(e,i){return s("div",{key:i,staticClass:"list_inner"},[s("div",{staticClass:"flex_col",on:{click:function(s){return t.getThisBus(e)}}},[s("p",{staticClass:"text_b"},[t._v(t._s(e.zh_tw))]),s("p",{staticClass:"text_sec"},[t._v(" "+t._s(e.departureStopNameZh)+"-"+t._s(e.destinationStopNameZh)+" ")])]),s("div",{staticClass:"flex_row_ce"},[s("i",{staticClass:"i_love",class:{"i_love active":e.isLove},on:{click:function(s){return t.setLoveList(e)}}}),s("i",{staticClass:"i_next",on:{click:function(s){return t.getThisBus(e)}}})])])})),0)])])])])])},dt=[],ht=(s("159b"),s("841c"),s("e9c4"),"TRANSFREE_COMMONLY_USED_BUS"),ft=function(t){var e=_t();null===e&&(e=new Array),e.push(t),window.localStorage.setItem(ht,JSON.stringify(e))},mt=function(t){var e=_t();console.log(" removeBus=",e),console.log("bus=",t),e=e.filter((function(e){return e.routeUID!==t.routeUID})),console.log("after removeBus=",e),null!==e&&window.localStorage.setItem(ht,JSON.stringify(e))},_t=function(){var t=window.localStorage.getItem(ht);return JSON.parse(t)},vt=function(){window.localStorage.removeItem(ht)},bt={name:"SearchList",props:{selectedCity:Object,search:String},data:function(){return{cities:I,selected:I[0],open:!1,isDynamicKeyboardShow:!1,isBusInfoShow:!1,searchBusList:new Array,cityBusList:new Array,routeName:String,busNum:"",searchMode:y.estimated}},mounted:function(){this.sendRequest()},methods:{sendRequest:function(){var t=this;G("get","".concat(Z,"/Route/City/").concat(this.selectedCity.value,"?&$format=").concat(void 0)).then((function(e){console.log("res=",e),t.searchBus(e),t.getLoveList(),t.searchKeyWord()})).catch((function(t){window.alert("Get SearchList occurs error："+t)}))},searchBus:function(t){var e=this;this.searchBusList=[],this.cityBusList=[],t.data.forEach((function(t){var s=new N(t.RouteUID,t.RouteName.Zh_tw,t.RouteName.En,t.DepartureStopNameZh,t.DestinationStopNameZh);e.searchBusList.push(s)})),this.cityBusList=this.searchBusList},searchKeyWord:function(){var t=this,e=[];this.searchBusList=this.cityBusList,this.searchBusList.forEach((function(s){s.zh_tw.indexOf(t.search),-1!=s.zh_tw.indexOf(t.search)&&e.push(s)})),this.searchBusList=e},getThisBus:function(t){this.busNum=t.zh_tw,this.order("EstimatedTimeOfArrival"),this.$emit("getBusNum",this.busNum)},setLoveList:function(t){this.cityBusList.forEach((function(e){e.routeUID==t.routeUID&&(e.isLove=!t.isLove)})),t.isLove?ft(t):mt(t)},getLoveList:function(){var t=this,e=_t();if(null!=e){var s=[];e.forEach((function(e){e.routeUID.substring(0,3)==t.selectedCity.id&&s.push(e)})),this.cityBusList.forEach((function(t){s.forEach((function(e){e.routeUID==t.routeUID&&(t.isLove=!0)}))}))}},order:function(t){this.$emit("showBusInfo"),this.$router.push({name:t,params:{city:this.selectedCity.value,routeName:this.busNum}})}},watch:{selectedCity:function(){this.sendRequest(),this.getLoveList()},search:function(){this.searchKeyWord()}}},gt=bt,yt=Object(w["a"])(gt,pt,dt,!1,null,"bda6966a",null),Ct=yt.exports,St=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h_100 w_100"},[s("div",{staticClass:"flex_row_cb w_100 h_100"},[s("div",{staticClass:"flex_col w_100 h_100"},[s("div",{staticClass:"content_list"},[s("div",{staticClass:"list_top flex_row_cb"},[s("i",{staticClass:"i_model_list",on:{click:function(e){return t.switchMode("EstimatedTimeOfArrival")}}}),s("p",[t._v("公車號碼")]),t._m(0)]),s("div",{staticClass:"bookmark_container"},[s("button",{class:{active:t.isgoStopListActive},on:{click:function(e){t.isgoStopListActive=!0}}},[t._v(" 去 ")]),s("button",{class:{active:!t.isgoStopListActive},on:{click:function(e){t.isgoStopListActive=!1}}},[t._v(" 返 ")])]),s("div",{staticClass:"list_bottom flex_col"},[s("div",{staticClass:"select_scrollbar"},[s("div",{staticClass:"map_inner"},[s("i",{class:{i_zoomin:!0,active:"in"==t.zoomMode},on:{click:function(e){t.zoomSize++,t.zoomMode="in"}}}),s("i",{class:{i_zoomout:!0,active:"out"==t.zoomMode},on:{click:function(e){t.zoomSize--,t.zoomMode="out"}}}),t.isPopUpActive&&"stop"==t.popUpMode?s("div",{staticClass:"content_card"},[s("div",{staticClass:"flex_row_cb"},[this.$store.getters.getMultilingual===t.multilingualChinese?s("p",{staticClass:"title_card_txt"},[t._v(" "+t._s(t.activeStop.StopName.Zh_tw)+" ")]):s("p",{staticClass:"title_card_txt"},[t._v(" "+t._s(t.activeStop.StopName.En)+" ")]),s("i",{staticClass:"i_close",on:{click:function(e){t.isPopUpActive=!1}}})]),s("label",{staticClass:"flex_row_cb"},[s("p",[t._v("路線")]),s("p",[t._v(t._s(this.$route.params.routeName))])]),s("label",{staticClass:"flex_row_cb"},[s("p",[t._v("站序")]),s("p",[t._v(t._s(t.activeStop.StopIndex))])])]):t._e(),s("Map",{attrs:{center:t.center,stopsData:t.activeList,zoom:t.zoomSize},on:{"show-stop-popup":t.showStopInfo}}),s("router-view")],1),s("div",{staticClass:"black_overlay"})]),s("p",{staticClass:"text_info"},[t._v("更新時間 "+t._s(t.updateTime))])])])])])])},wt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex_row_ce"},[s("i",{staticClass:"i_update"}),s("i",{staticClass:"i_info"})])}],kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"map-cpn"}},[s("l-map",{ref:"myMap",staticStyle:{height:"100vh"},attrs:{zoom:t.zoom,center:t.center,options:t.options}},[s("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),s("l-marker",{ref:"location",attrs:{"lat-lng":t.center}},[s("l-popup",[t._v(" 你的位置 ")])],1),t._l(t.stopsData,(function(e,i){return s("l-marker",{key:e.StopID,attrs:{"lat-lng":e.StopPosition},on:{click:function(e){return t.selectedIndex(i)}}},[s("l-icon",{attrs:{"icon-url":t.icon.type.gold,"shadow-url":t.icon.shadowUrl,"icon-size":t.icon.iconSize,"icon-anchor":t.icon.iconAnchor,"popup-anchor":t.icon.popupAnchor,"shadow-size":t.icon.shadowSize}}),s("l-popup",[t._v(" "+t._s(e.StopName.Zh_tw+" "+e.StopName.En)+" ")])],1)}))],2)],1)},Bt=[],xt={name:"Map",data:function(){return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',options:{},icon:{type:{red:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",blue:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png",orange:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png",gold:"https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-gold.png"},shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},multilingualChinese:h,multilingualEnglish:f}},props:["center","stopsData","zoom"],methods:{selectedIndex:function(t){this.$emit("show-stop-popup",t)}},mounted:function(){}},$t=xt,Lt=(s("44ae"),Object(w["a"])($t,kt,Bt,!1,null,"7fe65f80",null)),It=Lt.exports,Tt={name:"SearchMap",data:function(){return{routeName:"",goStopList:[],backStopList:[],isgoStopListActive:!0,updateTime:z(),busList:[],allRouteCityStops:[],interval:"",multilingualChinese:h,multilingualEnglish:f,center:[22.612961,120.304167],zoomSize:13,popUpMode:"route",isPopUpActive:!0,zoomMode:"in",activeStop:{},operatorName:"",plateNumb:""}},components:{Map:It},mounted:function(){var t=this;if(this.getStopOfRoute(),this.$store.getters.getIsAutoUpdate){var e=1e3*this.$store.getters.getUpdateFrequency;this.interval=setInterval((function(){t.resetData()}),e)}},beforeDestroy:function(){console.log("clearInterval"),clearInterval(this.interval)},methods:{resetData:function(){this.getBusList()},switchMode:function(t){this.$router.push({name:t,params:{city:this.$route.params.city,routeName:this.$route.params.routeName}})},getStopOfRoute:function(){var t=this,e=this.$route.params.city,s=this.$route.params.routeName;G("get","".concat(Z,"/StopOfRoute/City/").concat(e,"/").concat(s,"?$format=").concat(l)).then((function(e){t.allRouteCityStops=e.data,t.goStopList=t.makeStopList(e.data[1]),t.backStopList=t.makeStopList(e.data[0]),t.operatorName=e.data[0].Operators[0].OperatorName,t.setCenter()})).catch((function(t){window.alert("Get getStopOfRoute occurs error："+t)}))},makeStopList:function(t){var e=t.Stops,s=[];return e.forEach((function(t,e){var i={StopID:t.StopID,StopName:t.StopName,StopPosition:[t.StopPosition.PositionLat,t.StopPosition.PositionLon],StopIndex:e+1};s.push(i)})),s},setCenter:function(){this.activeList.length>10?this.center=this.activeList[9].StopPosition:this.activeList.length>5?this.center=this.activeList[4].StopPosition:this.center=this.activeList[0].StopPosition},showStopInfo:function(t){console.log("showStopInfo",{stopIndex:t}),this.isPopUpActive=!0,this.popUpMode="stop",this.activeStop=this.activeList[t],console.log({activeStop:this.activeStop})},getBusList:function(){var t=this,e=this.$route.params.city,s=this.$route.params.routeName;G("get","".concat(Z,"/RealTimeNearStop/City/").concat(e,"/").concat(s,"?$format=").concat(l)).then((function(e){t.busList=e.data})).catch((function(t){window.alert("Get RealTimeNearStop occurs error："+t)}))},getBusNearByStop:function(t,e){var s=this.busList.filter((function(s){return s.StopName.Zh_tw===t&&s.Direction===e}));return 0===s.length?"":s},isBarrierFree:function(t){if(""!==t){var e=this.allBusInCity.filter((function(e){return e.PlateNumb===t}));return 0!==e.length&&1===e[0].VehicleType}return!1}},computed:{activeList:{get:function(){return this.isgoStopListActive?this.goStopList:this.backStopList},set:function(t){}}},watch:{isgoStopListActive:function(t,e){this.activeList=t&&!e?this.goStopList:this.backStopList,this.setCenter()}}},jt=Tt,Nt=Object(w["a"])(jt,St,wt,!1,null,"572dc62d",null),Ot=Nt.exports,Ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"w_100"},[s("div",{staticClass:"flex_row_sb w_100 h_100"},[s("div",{staticClass:"flex_col w_100 h_100"},[s("div",{staticClass:"block_primary flex_col"},[s("p",{staticClass:"title_txt"},[t._v(t._s(t.$t("personalSettings")))]),s("div",{staticClass:"custom-select",on:{blur:function(e){t.isFontSizeOpen=!1}}},[s("div",{staticClass:"selected",class:{open:t.isFontSizeOpen},on:{click:function(e){t.isFontSizeOpen=!t.isFontSizeOpen,t.isMultilingualOpen=!1,t.isUpdateFrequencyOpen=!1}}},[t._v(" "+t._s(t.$t(t.selectedFontSizeText))+" ")]),s("div",{staticClass:"items flex_col",class:{selectHide:!t.isFontSizeOpen}},[s("p",{staticClass:"option_title"},[t._v(t._s(t.$t("selectFontSize")))]),s("div",{staticClass:"select_scrollbar"},[s("div",{staticClass:"select_option",on:{click:function(e){t.selectedFontSizeValue=t.fontSizeSmall,t.isFontSizeOpen=!1}}},[t._v(" "+t._s(t.$t("fontSmall"))+" ")]),s("div",{staticClass:"select_option",on:{click:function(e){t.selectedFontSizeValue=t.fontSizeNormal,t.isFontSizeOpen=!1}}},[t._v(" "+t._s(t.$t("fontNormal"))+" ")]),s("div",{staticClass:"select_option",on:{click:function(e){t.selectedFontSizeValue=t.fontSizeBig,t.isFontSizeOpen=!1}}},[t._v(" "+t._s(t.$t("fontBig"))+" ")]),s("div",{staticClass:"select_option",on:{click:function(e){t.selectedFontSizeValue=t.fontSizeBigger,t.isFontSizeOpen=!1}}},[t._v(" "+t._s(t.$t("fontBigger"))+" ")])])])]),s("div",{staticClass:"custom-select",on:{blur:function(e){t.isMultilingualOpen=!1}}},[s("div",{staticClass:"selected",class:{open:t.isMultilingualOpen},on:{click:function(e){t.isMultilingualOpen=!t.isMultilingualOpen,t.isFontSizeOpen=!1,t.isUpdateFrequencyOpen=!1}}},[t._v(" "+t._s(t.$t(t.selectedMultilingualText))+" ")]),s("div",{staticClass:"items flex_col",class:{selectHide:!t.isMultilingualOpen}},[s("p",{staticClass:"option_title"},[t._v(t._s(t.$t("selectMultilingual")))]),s("div",{staticClass:"select_scrollbar"},[s("div",{staticClass:"select_option",on:{click:function(e){t.selectedMultilingualValue=t.multilingualChinese,t.isMultilingualOpen=!1}}},[t._v(" "+t._s(t.$t("tw"))+" ")]),s("div",{staticClass:"select_option",on:{click:function(e){t.selectedMultilingualValue=t.multilingualEnglish,t.isMultilingualOpen=!1}}},[t._v(" "+t._s(t.$t("en"))+" ")])])])])]),s("div",{staticClass:"block_primary flex_col"},[s("p",{staticClass:"title_txt"},[t._v(t._s(t.$t("updateSettings")))]),s("div",{staticClass:"custom-switch"},[s("div",{staticClass:"selected"},[s("p",[t._v(t._s(t.$t("autoUpdateRoute")))])]),s("div",{staticClass:"switch_open_close"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedIsAutoUpdate,expression:"selectedIsAutoUpdate"}],attrs:{type:"checkbox",id:"toggle"},domProps:{checked:Array.isArray(t.selectedIsAutoUpdate)?t._i(t.selectedIsAutoUpdate,null)>-1:t.selectedIsAutoUpdate},on:{change:function(e){var s=t.selectedIsAutoUpdate,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n=null,o=t._i(s,n);i.checked?o<0&&(t.selectedIsAutoUpdate=s.concat([n])):o>-1&&(t.selectedIsAutoUpdate=s.slice(0,o).concat(s.slice(o+1)))}else t.selectedIsAutoUpdate=a}}}),t._m(0)])]),s("div",{staticClass:"custom-select",on:{blur:function(e){t.isUpdateFrequencyOpen=!1}}},[s("div",{staticClass:"selected",class:{open:t.isUpdateFrequencyOpen},on:{click:function(e){t.isUpdateFrequencyOpen=!t.isUpdateFrequencyOpen,t.isFontSizeOpen=!1,t.isMultilingualOpen=!1}}},[s("p",{staticClass:"text_overflow"},[t._v(" "+t._s(t.$t("arrivalTimeUpdateFrequency"))+" "+t._s(t.selectUpdateFrequency)+" "+t._s(t.$t("seconds"))+" ")])]),s("div",{staticClass:"items flex_col",class:{selectHide:!t.isUpdateFrequencyOpen}},[s("p",{staticClass:"option_title"},[t._v(t._s(t.$t("selectUpdateFrequency")))]),s("div",{staticClass:"select_scrollbar"},[s("div",{staticClass:"select_option",on:{click:function(e){t.selectUpdateFrequency=t.updateFrequencyFaster,t.isUpdateFrequencyOpen=!1}}},[t._v(" "+t._s(t.$t("arrivalTimeUpdateFrequency"))+" "+t._s(t.updateFrequencyFaster)+" "+t._s(t.$t("seconds"))+" ")]),s("div",{staticClass:"select_option",on:{click:function(e){t.selectUpdateFrequency=t.updateFrequencyFast,t.isUpdateFrequencyOpen=!1}}},[t._v(" "+t._s(t.$t("arrivalTimeUpdateFrequency"))+" "+t._s(t.updateFrequencyFast)+" "+t._s(t.$t("seconds"))+" ")]),s("div",{staticClass:"select_option",on:{click:function(e){t.selectUpdateFrequency=t.updateFrequencyMedian,t.isUpdateFrequencyOpen=!1}}},[t._v(" "+t._s(t.$t("arrivalTimeUpdateFrequency"))+" "+t._s(t.updateFrequencyMedian)+" "+t._s(t.$t("seconds"))+" ")]),s("div",{staticClass:"select_option",on:{click:function(e){t.selectUpdateFrequency=t.updateFrequencySlow,t.isUpdateFrequencyOpen=!1}}},[t._v(" "+t._s(t.$t("arrivalTimeUpdateFrequency"))+" "+t._s(t.updateFrequencySlow)+" "+t._s(t.$t("seconds"))+" ")]),s("div",{staticClass:"select_option",on:{click:function(e){t.selectUpdateFrequency=t.updateFrequencySlower,t.isUpdateFrequencyOpen=!1}}},[t._v(" "+t._s(t.$t("arrivalTimeUpdateFrequency"))+" "+t._s(t.updateFrequencySlower)+" "+t._s(t.$t("seconds"))+" ")])])])])]),s("div",{staticClass:"block_primary flex_col"},[s("p",{staticClass:"title_txt"},[t._v(t._s(t.$t("versionSettings")))]),s("div",{staticClass:"content_card"},[s("p",{staticClass:"title_card_txt"},[t._v(t._s(t.$t("versionInfo")))]),s("label",{staticClass:"flex_row_cb"},[s("p",[t._v(t._s(t.$t("programVersion")))]),s("p",[t._v(t._s(t.programVersion))])]),s("label",{staticClass:"flex_row_cb"},[s("p",[t._v(t._s(t.$t("routeVersion")))]),s("p",[t._v(t._s(t.routeVersion))])])])])]),s("div",{staticClass:"flex_row w_100 margin_top"},[s("div",{staticClass:"block_setting",on:{click:function(e){t.isPopupShow=!t.isPopupShow}}},[s("div",{staticClass:"flex_col_cc h_100"},[s("i",{staticClass:"i_reset"}),s("p",{staticClass:"text_b"},[t._v(t._s(t.$t("resetCommonBus")))])])]),t.isPopupShow?s("div",{staticClass:"content_popup"},[s("div",{staticClass:"flex_row_cb"},[s("p",{staticClass:"title_card_txt"},[t._v(t._s(t.$t("remindYou")))]),s("i",{staticClass:"i_close",on:{click:function(e){t.isPopupShow=!1}}})]),s("div",{staticClass:"flex_row_cc"},[t.isA11y?t._e():s("p",[t._v(t._s(t.$t("doYouConfirmToResetCommonBusList")))])]),s("div",{staticClass:"flex_row_cc"},[s("button",{staticClass:"bus_status2",attrs:{type:"button"},on:{click:function(e){t.isPopupShow=!1}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),s("button",{staticClass:"bus_status1",attrs:{type:"button"},on:{click:function(e){return t.resetCommonBus()}}},[t._v(" "+t._s(t.$t("confirm"))+" ")])])]):t._e(),s("div",{staticClass:"black_overlay"}),s("address",{staticClass:"block_setting"},[s("a",{attrs:{href:"mailto:transfree@gmail.com"}},[s("div",{staticClass:"flex_col_cc h_100"},[s("i",{staticClass:"i_contact"}),s("p",{staticClass:"text_b"},[t._v(t._s(t.$t("contactUs")))])])])])]),s("div",{staticClass:"img_04"})])])},At=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{attrs:{for:"toggle"}},[s("i"),s("div",{staticClass:"flex_row_cb"},[s("p",[t._v("ON")]),s("p",[t._v("OFF")])])])}],Mt=(s("a9e3"),{name:"Settings.vue",data:function(){return{programVersion:o,routeVersion:c,fontSizeSmall:r,fontSizeNormal:u,fontSizeBig:p,fontSizeBigger:d,isFontSizeOpen:!1,selectedFontSizeValue:this.$store.getters.getFontSize,updateFrequencyFaster:m,updateFrequencyFast:_,updateFrequencyMedian:v,updateFrequencySlow:b,updateFrequencySlower:g,isUpdateFrequencyOpen:!1,selectUpdateFrequency:this.$store.getters.getUpdateFrequency,selectedIsAutoUpdate:this.$store.getters.getIsAutoUpdate,isMultilingualOpen:!1,selectedMultilingualValue:this.$store.getters.getMultilingual,multilingualChinese:h,multilingualEnglish:f,isPopupShow:!1,isA11y:!1}},props:{globalFontSize:Number},computed:{selectedFontSizeText:{get:function(){return this.getFontSizeText(this.selectedFontSizeValue)},set:function(t){}},selectedMultilingualText:{get:function(){return this.selectedMultilingualValue},set:function(t){}}},watch:{selectedFontSizeValue:function(t,e){this.$store.dispatch("setFontSize",t)},selectedMultilingualValue:function(t,e){this.$store.dispatch("setMultilingual",t)},selectedIsAutoUpdate:function(t,e){this.$store.dispatch("setIsAutoUpdate",t)},selectUpdateFrequency:function(t,e){this.$store.dispatch("setUpdateFrequency",t)}},methods:{getFontSizeText:function(t){switch(t){case r:return"fontSmall";case u:return"fontNormal";case p:return"fontBig";case d:return"fontBigger"}},resetCommonBus:function(){this.isA11y=!this.isA11y,this.isPopupShow=!1,vt()}}}),zt=Mt,Ut=Object(w["a"])(zt,Ft,At,!1,null,"ea8767f2",null),Vt=Ut.exports,Dt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content_list"},[s("div",{staticClass:"list_top flex_row_cb"},[s("i",{staticClass:"i_model_map",on:{click:function(e){return t.switchMode("SearchMap")}}}),s("p",[t._v(t._s(t.routeName))]),s("div",{staticClass:"flex_row_ce"},[s("i",{staticClass:"i_update",on:{click:t.clickUpdateData}}),s("i",{staticClass:"i_info",on:{click:t.mobileSwitchBusInfo}})])]),s("div",{staticClass:"bookmark_container"},[s("button",{class:{active:t.isGoListActive},on:{click:function(e){t.isGoListActive=!0,t.resetData()}}},[t._v(" "+t._s(t.$t("go"))+" ")]),s("button",{class:{active:!t.isGoListActive},on:{click:function(e){t.isGoListActive=!1,t.resetData()}}},[t._v(" "+t._s(t.$t("back"))+" ")])]),s("div",{staticClass:"list_bottom flex_col"},[s("div",{staticClass:"select_scrollbar"},t._l(t.activeList,(function(e,i){return s("div",{key:i,staticClass:"list_inner"},[s("div",{staticClass:"flex_row_c"},[0==e.StopStatus?s("span",[e.EstimateTime/60>=1?s("label",{staticClass:"bus_status1"},[s("span",[t._v(t._s(parseInt(e.EstimateTime/60)))]),t._v(t._s(t.$t("minutes"))+" ")]):t._e(),e.EstimateTime/60<1?s("label",{staticClass:"bus_status2"},[s("span",[t._v(t._s(t.$t("pitting")))])]):t._e()]):t._e(),1==e.StopStatus?s("span",[s("label",{staticClass:"bus_status0"},[t._v(t._s(t.$t("hasNotDeparted")))])]):t._e(),2==e.StopStatus?s("span",[s("label",{staticClass:"bus_status0"},[t._v(t._s(t.$t("trafficControlDoNotStop")))])]):t._e(),3==e.StopStatus?s("span",[s("label",{staticClass:"bus_status0"},[t._v(t._s(t.$t("lastBusHasPassed")))])]):t._e(),4==e.StopStatus?s("span",[s("label",{staticClass:"bus_status0"},[t._v(t._s(t.$t("notOperatingToday")))])]):t._e(),t.$store.getters.getMultilingual===t.multilingualChinese?s("div",[t._v(" "+t._s(e.StopName.Zh_tw)+" ")]):t._e(),t.$store.getters.getMultilingual===t.multilingualEnglish?s("div",[t._v(" "+t._s(e.StopName.En)+" ")]):t._e()]),s("div",{staticClass:"flex_col"},t._l(t.getBusNearByStop(e.StopName.Zh_tw,e.Direction),(function(e,i){return s("div",{key:i,staticClass:"flex_row_ce"},[s("p",{staticClass:"text_primary"},[t._v(t._s(e.PlateNumb))]),t.isBarrierFree(e.PlateNumb)?s("i",{staticClass:"i_a11ybus"}):t._e()])})),0)])})),0),s("p",{staticClass:"text_info"},[t._v(t._s(t.$t("updateTimestamp"))+" "+t._s(t.updateTime))])])])},Pt=[],Kt=(s("4e82"),{name:"EstimatedTimeOfArrival",data:function(){return{routeName:"",goList:[],backList:[],isGoListActive:!0,updateTime:z(),busList:[],allBusInCity:[],interval:"",multilingualChinese:h,multilingualEnglish:f}},mounted:function(){var t=this;if(this.getAllBusInCity(),this.getStopList(),this.getBusList(),this.$store.getters.getIsAutoUpdate){var e=1e3*this.$store.getters.getUpdateFrequency;this.interval=setInterval((function(){t.resetData()}),e)}},beforeDestroy:function(){console.log("clearInterval"),clearInterval(this.interval)},methods:{resetData:function(){this.getStopList(),this.getBusList()},getAllBusInCity:function(){var t=this,e=this.$route.params.city;G("get","".concat(Z,"/Vehicle/City/").concat(e,"?$format=").concat(l)).then((function(e){t.allBusInCity=e.data})).catch((function(t){window.alert("Get AllBusInCity occurs error："+t)}))},getStopList:function(){var t=this,e=this.$route.params.city,s=this.$route.params.routeName;G("get","".concat(Z,"/EstimatedTimeOfArrival/City/").concat(e,"/").concat(s,"?$format=").concat(l)).then((function(e){console.log({getStopListRes:e.data}),t.$store.getters.getMultilingual===h?t.routeName=e.data[0].RouteName.Zh_tw:t.routeName=e.data[0].RouteName.En,t.goList=e.data.filter((function(t){return 0==t.Direction})).sort((function(t,e){return t.StopID-e.StopID})),t.backList=e.data.filter((function(t){return 1==t.Direction})).sort((function(t,e){return t.StopID-e.StopID})),t.updateTime=z()})).catch((function(t){window.alert("Get EstimatedTimeOfArrival occurs error："+t)}))},getBusList:function(){var t=this,e=this.$route.params.city,s=this.$route.params.routeName;G("get","".concat(Z,"/RealTimeNearStop/City/").concat(e,"/").concat(s,"?$format=").concat(l)).then((function(e){t.busList=e.data})).catch((function(t){window.alert("Get RealTimeNearStop occurs error："+t)}))},getBusNearByStop:function(t,e){var s=this.busList.filter((function(s){return s.StopName.Zh_tw===t&&s.Direction===e}));return 0===s.length?"":(console.log({stopName:t,direction:e,nearBy:s}),s)},isBarrierFree:function(t){if(""!==t){var e=this.allBusInCity.filter((function(e){return e.PlateNumb===t}));return 0!==e.length&&1===e[0].VehicleType}return!1},clickUpdateData:function(){var t=this;if(this.resetData(),this.$store.getters.getIsAutoUpdate){clearInterval(this.interval);var e=1e3*this.$store.getters.getUpdateFrequency;this.interval=setInterval((function(){t.resetData()}),e)}},mobileSwitchBusInfo:function(){this.$emit("mobileSwitchBusInfo")},showSearchMode:function(){this.$emit("searchMode","search-map")},switchMode:function(t){this.$router.push({name:t,params:{city:this.$route.params.city,routeName:this.$route.params.routeName}})}},computed:{activeList:{get:function(){return this.isGoListActive?(console.log({estGoList:this.goList}),this.goList):this.backList},set:function(t){}}},watch:{isGoListActive:function(t,e){this.activeList=t&&!e?this.goList:this.backList}}}),Et=Kt,qt=Object(w["a"])(Et,Dt,Pt,!1,null,"3654600c",null),Ht=qt.exports,Rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h_100 w_100"},[s("div",{staticClass:"flex_row_sb w_100 h_100"},[s("div",{staticClass:"flex_col w_100 h_100 auto"},[s("Search",{attrs:{inputValue:t.inputValue,page:t.page,inputHint:t.inputHint},on:{getSearchCity:t.getSearchCity,getInputValue:t.getInputValue}}),1==t.isDynamicKeyboardShow||1==t.isBusInfoShow?s("div",{staticClass:"block_sec flex_col select_scrollbar",style:[t.isMobileOpenBusInfo?{display:"block"}:{display:"none"}]},[t.isDynamicKeyboardShow?s("span",[s("DynamicKeyboard",{on:{clickKeyboard:t.clickKeyboard,mobileSwitchBusInfo:t.mobileSwitchBusInfo}})],1):t._e(),t.isBusInfoShow&&0==t.isDynamicKeyboardShow?s("span",[s("BusInfo",{attrs:{city:this.selected.value,routeName:this.busNum},on:{mobileSwitchBusInfo:t.mobileSwitchBusInfo}})],1):t._e()]):s("div",{staticClass:"block_sec img_first flex_col"},[s("div",{staticClass:"img_03"})])],1),s("div",{staticClass:"block_list"},[0!=t.isSelectedTheBus||t.showEstimatedTimeOfArrival?t._e():s("div",{staticClass:"content_list"},[s("div",{staticClass:"list_top flex_row_cc"},[t._v(t._s(t.$t("searchList")))]),t.busList.length<1?s("div",{staticClass:"list_bottom flex_col_cc"},[s("div",{staticClass:"img_box"})]):t._e(),t.busList.length>=1?s("div",{staticClass:"list_bottom h_100 flex_col"},[s("div",{staticClass:"select_scrollbar"},t._l(t.busList,(function(e,i){return s("div",{key:i,staticClass:"list_inner"},[s("div",{staticClass:"flex_col",on:{click:function(s){return t.getThisBus(e.zh_tw)}}},[s("p",{staticClass:"text_b"},[t._v(t._s(e.zh_tw))]),s("p",{staticClass:"text_sec"},[t._v(" "+t._s(e.departureStopNameZh)+"-"+t._s(e.destinationStopNameZh)+" ")])]),s("div",{staticClass:"flex_row_ce"},[s("i",{staticClass:"i_love",class:{"i_love active":e.isLove},on:{click:function(s){return t.setLoveList(e)}}}),s("i",{staticClass:"i_info",on:{click:function(s){return t.getBusInfo(e)}}})])])})),0)]):t._e()]),1==t.isSelectedTheBus&&t.showEstimatedTimeOfArrival?s("router-view",{staticClass:"content_list",attrs:{selectedCity:t.selected,search:t.inputValue},on:{mobileSwitchBusInfo:t.mobileSwitchBusInfo,showBusInfo:function(e){t.isBusInfoShow=!0,t.isDynamicKeyboardShow=!1}}}):t._e()],1)])])},Yt=[],Zt={name:"CommonlyUsedBus",components:{DynamicKeyboard:ot,BusInfo:tt,Search:K},data:function(){return{page:"commonlyUsed",inputHint:"enterRouteName",cities:I,selected:I[0],open:!1,isDynamicKeyboardShow:!1,isBusInfoShow:!1,isMobileOpenBusInfo:!0,isSelectedTheBus:!1,busList:new Array,cityBusList:new Array,allBusList:new Array,busNum:"",inputValue:"",showEstimatedTimeOfArrival:!1}},mounted:function(){var t=this,e=_t();null!=e?(e.forEach((function(e){t.allBusList.push(e)})),this.setCityBusList()):this.busList=[]},methods:{clickKeyboard:function(t){"reset"===t?this.inputValue="":"back"===t?(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.getInputValue(this.inputValue)):(this.inputValue=this.inputValue+t,this.getInputValue(this.inputValue))},setCityBusList:function(){var t=this;this.isDynamicKeyboardShow=!1;var e=[];this.allBusList.forEach((function(s){s.routeUID.substring(0,3)==t.selected.id&&e.push(s)})),this.cityBusList=e,this.busList=this.cityBusList},getSearchCity:function(t){this.selected=t,this.setCityBusList(),this.searchKeyWord()},getInputValue:function(t){this.isDynamicKeyboardShow=!0,this.isMobileOpenBusInfo=!0,this.showEstimatedTimeOfArrival=!1,this.isSelectedTheBus=!1,this.inputValue=t},getThisBus:function(t){this.busNum=t,this.order(),this.$emit("getBusNum",this.busNum),this.isSelectedTheBus=!0},setLoveList:function(t){this.busList.forEach((function(e){e.routeUID==t.routeUID&&(e.isLove=!t.isLove)})),t.isLove?ft(t):mt(t)},searchKeyWord:function(){var t=this,e=[];this.busList=this.cityBusList,this.busList.forEach((function(s){s.zh_tw.indexOf(t.inputValue),-1!=s.zh_tw.indexOf(t.inputValue)&&e.push(s)})),this.busList=e},order:function(){this.$emit("showBusInfo"),this.$router.push("/commonly-used-bus/estimated-time-of-arrival/".concat(this.selected.value,"/").concat(this.busNum)).catch((function(){})),this.showEstimatedTimeOfArrival=!0},mobileSwitchBusInfo:function(){this.isMobileOpenBusInfo=!this.isMobileOpenBusInfo},getBusInfo:function(t){this.isDynamicKeyboardShow=!this.isDynamicKeyboardShow,this.isBusInfoShow=!this.isBusInfoShow,this.busNum=t.zh_tw}},watch:{inputValue:function(){this.searchKeyWord()},selected:function(){this.showEstimatedTimeOfArrival=!1}}},Gt=Zt,Wt=Object(w["a"])(Gt,Rt,Yt,!1,null,"e2845194",null),Jt=Wt.exports,Xt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Qt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h_100 w_100"},[s("div",{staticClass:"content_list"},[s("div",{staticClass:"list_top flex_col_cc"},[t._v("搜尋清單")]),s("div",{staticClass:"list_bottom flex_col_cc"},[s("div",{staticClass:"img_box"})])])])}],te={name:"BlankList"},ee=te,se=Object(w["a"])(ee,Xt,Qt,!1,null,"0ae85025",null),ie=se.exports,ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h_100 w_100"},[s("div",{staticClass:"flex_row_sb w_100 h_100"},[s("div",{staticClass:"flex_col w_100 h_100 auto"},[s("SearchForNearby",{attrs:{inputValue:t.inputValue,page:t.page,inputHint:t.inputHint},on:{getInputValue:t.getInputValue,getSelected:t.getSelected}}),t._m(0)],1),s("div",{staticClass:"block_list"},[s("NearbyMap",{attrs:{zoom:t.zoom,center:t.center,limitDist:t.inputValue,city:t.selected}})],1)])])},ne=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"block_sec img_first flex_col"},[s("div",{staticClass:"img_02"})])}],oe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"block_primary flex_col"},[s("p",{staticClass:"title_txt"},[t._v(t._s(t.$t(t.page)))]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"custom-select",attrs:{for:""}},[t._v(t._s(t.$t("currentCity")))]),s("div",{staticClass:"custom-select",on:{blur:function(e){t.open=!1}}},[s("div",{staticClass:"selected",class:{open:t.open},on:{click:function(e){t.open=!t.open}}},[t._v(" "+t._s(t.$t(t.selected.value))+" ")]),s("div",{staticClass:"items flex_col",class:{selectHide:!t.open}},[s("p",{staticClass:"option_title"},[t._v(t._s(t.$t("selectCity")))]),s("div",{staticClass:"select_scrollbar"},t._l(t.cities,(function(e,i){return s("div",{key:i,staticClass:"select_option",on:{click:function(s){t.selected=e,t.open=!1}}},[t._v(" "+t._s(t.$t(e.value))+" ")])})),0)])])]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"custom-select",attrs:{for:"distanceInput"}},[t._v(t._s(t.$t(t.inputHint)))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputValue,expression:"inputValue"}],staticClass:"inner_group text_overflow",attrs:{name:"distanceInput",type:"number",placeholder:t.$t("distanceUnit")},domProps:{value:t.inputValue},on:{focus:function(e){return t.focusInputValue()},input:function(e){e.target.composing||(t.inputValue=e.target.value)}}})]),""!=t.searchTimestamp?s("p",{staticClass:"text_info"},[t._v(" "+t._s(t.$t("searchTimestamp"))+" "+t._s(t.searchTimestamp)+" ")]):t._e()])},ce=[],le={name:"SearchForNearby",props:{inputValue:Number,page:String,inputHint:String},data:function(){return{cities:I,selected:I[0],open:!1,searchTimestamp:""}},mounted:function(){},methods:{focusInputValue:function(){this.$emit("getInputValue",this.inputValue)},updateSearchTimestamp:function(){this.searchTimestamp=z()}},watch:{inputValue:function(){this.$emit("getInputValue",this.inputValue),this.updateSearchTimestamp()},selected:function(){this.$emit("getSelected",this.selected),""!==this.selected&&this.updateSearchTimestamp()}}},re=le,ue=Object(w["a"])(re,oe,ce,!1,null,"f399ffe8",null),pe=ue.exports,de=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h_100 w_100"},[s("div",{staticClass:"flex_row_cb w_100 h_100"},[s("div",{staticClass:"flex_col w_100 h_100"},[s("div",{staticClass:"content_list"},[s("div",{staticClass:"list_top flex_row_cb"},[s("i"),s("p",[t._v(t._s(t.$t("nearbyStop")))]),t._m(0)]),s("div",{staticClass:"list_bottom flex_col"},[s("div",{staticClass:"select_scrollbar"},[s("div",{staticClass:"map_inner map_stop"},[s("i",{staticClass:"i_zoomin"}),s("i",{staticClass:"i_zoomout active"}),s("Map",{attrs:{center:t.center,stopsData:t.stopList,zoom:t.zoom},on:{"show-stop-popup":t.showStopInfo}}),s("div",{staticClass:"black_overlay"})],1)]),s("p",{staticClass:"text_info map_stop"},[t._v("更新時間 "+t._s(t.updateTime))])])])])])])},he=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex_row_ce"},[s("i",{staticClass:"i_update"})])}],fe=function(){return new Promise((function(t,e){window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition((function(e){var s={lat:e.coords.latitude,lon:e.coords.longitude};t(s)}),e):e("the browser doesn't support geolocation API")}))},me=function(t,e,s,i){if(t==s&&e==i)return 0;var a=Math.PI*t/180,n=Math.PI*s/180,o=e-i,c=Math.PI*o/180,l=Math.sin(a)*Math.sin(n)+Math.cos(a)*Math.cos(n)*Math.cos(c);return l>1&&(l=1),l=Math.acos(l),l=180*l/Math.PI,l=60*l*1.1515*1.609344,l},_e={name:"NearbyMap",props:{zoom:Number,limitDist:Number,city:Object},data:function(){return{updateTime:z(),stopList:[],interval:"",center:[22.612961,120.304167],isPopUpActive:!1,zoomMode:"in",activeStop:{},operatorName:"",plateNumb:"",rawStopList:[]}},components:{Map:It},mounted:function(){var t=this;if(console.log({City:this.city}),this.setCenter(this.city),this.$store.getters.getIsAutoUpdate){var e=1e3*this.$store.getters.getUpdateFrequency;this.interval=setInterval((function(){t.resetData()}),e)}},beforeDestroy:function(){console.log("clearInterval"),clearInterval(this.interval)},methods:{resetData:function(){this.getStopList()},makeStopList:function(t){var e=[];return t.forEach((function(t,s){var i={StopID:t.StopID,StopName:t.StopName,StopPosition:[t.StopPosition.PositionLat,t.StopPosition.PositionLon],StopIndex:s+1};e.push(i)})),e},setCenter:function(t){var e=this;fe().then((function(s){e.center=[s.lat,s.lon],t&&e.getStopList()})).catch((function(t){console.log({setCenterErr:t})}))},showStopInfo:function(){this.isPopUpActive=!0,this.popUpMode="stop"},getStopList:function(){var t=this,e=this.rawStopList.length,s=t.city.value;G("get","".concat(Z,"/Stop/City/").concat(s,"?$format=").concat(l,"&$top=200&$skip=").concat(e)).then((function(e){e.data.forEach((function(s,i){var a=s.StopPosition.PositionLat,n=s.StopPosition.PositionLon,o=me(t.center[0],t.center[1],a,n);e.data[i].distance=o})),t.rawStopList=t.rawStopList.concat(e.data),t.setStopList(),200==e.data.length&&t.rawStopList.length<3e3&&t.getStopList()})).catch((function(t){window.alert("Get getStopList occurs error："+t)}))},setStopList:function(){var t=this,e=t.rawStopList.filter((function(e){return e.distance<=t.limitDist/1e3}));t.stopList=t.makeStopList(e)}},computed:{},watch:{limitDist:function(){this.setStopList()},city:function(){this.getStopList()}}},ve=_e,be=Object(w["a"])(ve,de,he,!1,null,"41b74a13",null),ge=be.exports,ye={name:"NearbyStop",components:{SearchForNearby:pe,NearbyMap:ge},data:function(){return{page:"nearbyStop",inputHint:"distanceFromCenter",open:!1,isDynamicKeyboardShow:!1,isBusInfoShow:!1,searchBusList:new Array,inputValue:1e3,isMobileOpenBusInfo:!0,zoom:16,selected:""}},methods:{clickKeyboard:function(t){"reset"===t?this.inputValue="":"back"===t?(this.inputValue=this.inputValue.substr(0,this.inputValue.length-1),this.getInputValue(this.inputValue)):(this.inputValue=this.inputValue+t,this.getInputValue(this.inputValue))},getInputValue:function(t){this.inputValue=t},getSelected:function(t){this.selected=t},mobileSwitchBusInfo:function(){this.isMobileOpenBusInfo=!this.isMobileOpenBusInfo}},watch:{selected:function(){this.isDynamicKeyboardShow=!0,""!==this.selected.value&&this.inputValue},inputValue:function(){this.isDynamicKeyboardShow=!0,""!==this.selected.value&&this.inputValue}},mounted:function(){}},Ce=ye,Se=(s("450c"),Object(w["a"])(Ce,ae,ne,!1,null,"825c5796",null)),we=Se.exports;i["default"].use(x["a"]);var ke=new x["a"]({routes:[{path:"/",redirect:"/search-bus"},{path:"/search-bus",name:"SearchBus",component:ut,children:[{path:"",name:"BlankList",component:ie},{path:"search-list",name:"SearchList",component:Ct},{path:"/:city/:routeName",name:"SearchList",component:Ct},{path:"search-map/:city/:routeName",name:"SearchMap",component:Ot},{path:"estimated-time-of-arrival/:city/:routeName",name:"EstimatedTimeOfArrival",component:Ht}]},{path:"/commonly-used-bus",name:"CommonlyUsedBus",component:Jt,children:[{path:"estimated-time-of-arrival/:city/:routeName",name:"EstimatedTimeOfArrival",component:Ht}]},{path:"/settings",name:"Settings",component:Vt},{path:"/nearby-stop",name:"NearbyStop",component:we,children:[{path:"",name:"BlankList",component:ie},{path:"/:city/:routeName",name:"SearchList",component:Ct},{path:"estimated-time-of-arrival/:city/:routeName",name:"EstimatedTimeOfArrival",component:Ht}]}]}),Be=s("130e"),xe=s("5f5b"),$e=s("b1e0"),Le=(s("f9e3"),s("2dd8"),s("2f62"));i["default"].use(Le["a"]);var Ie=new Le["a"].Store({state:{fontSize:u,multilingual:h,isAutoUpdate:!0,updateFrequency:_},mutations:{setFontSize:function(t,e){t.fontSize=e},setMultilingual:function(t,e){t.multilingual=e,He.$i18n.locale=e},setIsAutoUpdate:function(t,e){t.isAutoUpdate=e},setUpdateFrequency:function(t,e){t.updateFrequency=e}},actions:{setFontSize:function(t,e){t.commit("setFontSize",e)},setMultilingual:function(t,e){t.commit("setMultilingual",e)},setIsAutoUpdate:function(t,e){t.commit("setIsAutoUpdate",e)},setUpdateFrequency:function(t,e){t.commit("setUpdateFrequency",e)}},getters:{getFontSize:function(t){return t.fontSize},getMultilingual:function(t){return t.multilingual},getIsAutoUpdate:function(t){return t.isAutoUpdate},getUpdateFrequency:function(t){return t.updateFrequency}}}),Te=Ie,je=s("a925"),Ne=s("0e18"),Oe=s("e312");i["default"].use(je["a"]);var Fe=h,Ae={tw:Ne,en:Oe},Me=new je["a"]({locale:Fe,messages:Ae}),ze=Me,Ue=s("dc02"),Ve=s("2699"),De=s("a40a"),Pe=s("4e2b"),Ke=s("f60f"),Ee=s("fbba"),qe=(s("6cc5"),s("e11e"));i["default"].config.productionTip=!1,i["default"].use(Be["a"],R.a),i["default"].use(xe["a"]),i["default"].use($e["a"]),i["default"].use(Ue["a"]),i["default"].component("l-map",Ve["a"]),i["default"].component("l-tile-layer",De["a"]),i["default"].component("l-marker",Pe["a"]),i["default"].component("l-popup",Ke["a"]),i["default"].component("l-icon",Ee["a"]),delete qe["Icon"].Default.prototype._getIconUrl,qe["Icon"].Default.mergeOptions({iconRetinaUrl:s("584d"),iconUrl:s("6397"),shadowUrl:s("e2b9")});var He=new i["default"]({render:function(t){return t(B)},router:ke,store:Te,i18n:ze}).$mount("#app")},"5f0d":function(t,e,s){"use strict";s("87bf")},7030:function(t,e,s){"use strict";s("853c")},"853c":function(t,e,s){},"85ec":function(t,e,s){},"87bf":function(t,e,s){},cc29:function(t,e,s){},e312:function(t){t.exports=JSON.parse('{"searchBus":"Search Bus","nearbyStop":"Nearby Stop","commonlyUsed":"Common Bus","settings":"Settings","switchToFriendlyArea":"Friendly Area","switchToNormalArea":"Normal Area","personalSettings":"Personal Settings","updateSettings":"Update Settings","versionSettings":"Version Settings","resetCommonBus":"Reset Common Bus","contactUs":"Contact Us","versionInfo":"Version Information","programVersion":"Program Version","routeVersion":"Route Version","autoUpdateRoute":"Update Route Information Automatically","selectFontSize":"Please Select Font Size","selectMultilingual":"Please Select Language","selectUpdateFrequency":"Please Select Arrival Time Update Frequency","arrivalTimeUpdateFrequency":"The Arrival Time Update Frequency Is","seconds":"seconds","tw":"Chinese","en":"English","fontSmall":"Font Small","fontNormal":"Font Normal","fontBig":"Font Big","fontBigger":"Font Bigger","selectCity":"Please Select City","enterRouteName":"Please Enter The Route Name","enterLocation":"Please Enter The Place","distanceFromCenter":"Distance","distanceUnit":"meter","currentCity":"City","searchTimestamp":"Search Timestamp","searchList":"Search List","go":"Go","back":"Back","minutes":"minutes","pitting":"Pitting","hasNotDeparted":"Hasn\'t Departed","trafficControlDoNotStop":"Traffic Control Doesn\'t Stop","lastBusHasPassed":"The Last Bus Has Passed","notOperatingToday":"Not Operating Today","updateTimestamp":"Update Timestamp","busInfo":"Bus Information","fare":"Fare","chargingMethod":"Charging Method","segmentedBuffer":"Segmented Buffer","weekdayDeparture":"Weekday Departure","firstBus":"First Bus","lastBus":"Last Bus","remark":"Remark","holidayDeparture":"Holiday departure","dynamicKeyboard":"Dynamic Keyboard","red":"Red","blue":"Blue","green":"Green","brown":"Brown","orange":"Orange","small":"Small","trunk":"Trunk","lead":"Lead","reset":"Reset","backspace":"Backspace","citizen":"Citizen","jumpingFrog":"Jumping Frog","neihuSciencePark":"Neihu Science Park","nangangSoftwarePark":"Nangang Software Park","night":"Night","maokong":"Maokong","wyan":"Wyan","Taipei":"Taipei","NewTaipei":"NewTaipei","Taoyuan":"Taoyuan","Taichung":"Taichung","Tainan":"Tainan","Kaohsiung":"Kaohsiung","Keelung":"Keelung","Hsinchu":"Hsinchu","HsinchuCounty":"HsinchuCounty","MiaoliCounty":"MiaoliCounty","ChanghuaCounty":"ChanghuaCounty","NantouCounty":"NantouCounty","YunlinCounty":"YunlinCounty","ChiayiCounty":"ChiayiCounty","Chiayi":"Chiayi","PingtungCounty":"PingtungCounty","YilanCounty":"YilanCounty","HualienCounty":"HualienCounty","TaitungCounty":"TaitungCounty","KinmenCounty":"KinmenCounty","PenghuCounty":"PenghuCounty","LienchiangCounty":"LienchiangCounty","remindYou":"Remind You","doYouWantToSwitchToNormalArea":"Do You Want To Switch To The Normal Area?","doYouWantToSwitchToFriendlyArea":"Do You Want To Switch To The Friendly Area?","doYouConfirmToResetCommonBusList":"Do you confirm to reset CommonBusList?","confirm":"Confirm","cancel":"Cancel"}')},ebae:function(t,e,s){}});
//# sourceMappingURL=app.272cb36f.js.map